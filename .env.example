# Optional: customize docker compose project name
# COMPOSE_PROJECT_NAME=portal-empleado

# =========================
# Frontend / Reverse Proxy
# =========================
API_UPSTREAM=https://api.mi.saed.digital
VITE_AUTH_MODE=google
VITE_API_PROXY_TARGET=http://api:5011
VITE_SIGNIN_PROXY_TARGET=http://api:5011

# ============
# ASP.NET Core
# ============
ASPNETCORE_ENVIRONMENT=Production
ASPNETCORE_URLS=http://0.0.0.0:5011
AllowedHosts=mi.saed.digital;localhost;127.0.0.1;api
# Optional: persistent key ring path for cookies/antiforgery
DataProtection__KeysPath=/app/App_Data/DataProtection-Keys

# ========
# Database
# ========
DatabaseProvider=Sqlite
ConnectionStrings__DefaultConnection=Data Source=/app/App_Data/portal-empleado-prod.db
# SQLite cache local de snapshots de recibos
ReceiptCache__DatabasePath=/app/App_Data/receipt-cache.db

# =====
# CORS
# =====
Cors__AllowedOrigins__0=https://mi.saed.digital
Cors__AllowedOrigins__1=https://portal.mi.saed.digital

# ==============
# Auth / Google
# ==============
Authentication__DevLogin__Enabled=false
Authentication__AllowedEmailDomains__0=saed.ar
Authentication__Google__ClientId=TU_CLIENT_ID_REAL.apps.googleusercontent.com
Authentication__Google__ClientSecret=TU_CLIENT_SECRET_REAL
Authentication__Google__ValidAudiences__0=TU_CLIENT_ID_REAL.apps.googleusercontent.com
Authentication__Google__ValidIssuers__0=https://accounts.google.com

# =============================
# Google Workspace Directory API
# =============================
Directory__ServiceAccountHostPath=./secrets/saed-rrhh-sa.json
Directory__ServiceAccountJsonPath=/app/secrets/saed-rrhh-sa.json
Directory__AdminUser=admin@saed.ar
Directory__CustomSchema=SAED-RRHH
Directory__CuilField=CUIL

# ========
# Features
# ========
Features__Gestion=false
Features__Vacaciones=false
ReciboSueldo__MockData=false
ReciboSueldo__DataDirectory=/app/recibo-sueldo
ReciboSueldo__MaxMonthsBack=12
ReciboSueldo__S3__Enabled=false
ReciboSueldo__S3__Bucket=saed-recibo-sueldo
ReciboSueldo__S3__Region=us-east-1
ReciboSueldo__S3__Prefix=
ReciboSueldo__S3__TraceSearches=false
# Folder por periodo (ej: 202601/Personal_27-12345678-9_202601.json o 2025-11/...)
# Placeholders disponibles: {cuil}, {cuil_digits}, {period}, {period_token}, {period_id}, {period_folder}
ReciboSueldo__S3__KeyTemplate={period}/Personal_{cuil}_{period}.json
# Fallback opcional de empresa (si no hay registro en BD)
ReciboSueldo__Company__DisplayName=
ReciboSueldo__Company__Cuit=
ReciboSueldo__Company__AddressLine=
ReciboSueldo__Company__City=
ReciboSueldo__Company__Province=
ReciboSueldo__Company__PostalCode=
ReciboSueldo__Company__Country=Argentina
# Credenciales AWS para S3 (usar IAM Role en prod cuando sea posible)
AWS_ACCESS_KEY_ID=REPLACE_WITH_AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY=REPLACE_WITH_AWS_SECRET_ACCESS_KEY
# Solo si usas credenciales temporales (STS)
AWS_SESSION_TOKEN=

# =================
# Security / Cookie
# =================
SecuritySettings__Cookie__HttpOnly=true
SecuritySettings__Cookie__Secure=true
SecuritySettings__Cookie__SameSite=Lax
SecuritySettings__Cookie__MaxAge=86400

# =============
# Rate Limiting
# =============
RateLimiting__FixedWindow__PermitLimit=100
RateLimiting__FixedWindow__Window=00:01:00
RateLimiting__SlidingWindow__PermitLimit=100
RateLimiting__SlidingWindow__Window=00:01:00
RateLimiting__SlidingWindow__SegmentsPerWindow=6

# ==========
# Observability (optional overrides)
# ==========
# Serilog__WriteTo__2__Args__credentials__password=YOUR_GRAFANA_API_TOKEN
# Serilog__WriteTo__2__Args__labels__1__value=production
